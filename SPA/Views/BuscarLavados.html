<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>

    <style>
        .jumbotron {
            background-color: white;
            margin-top: 10%;
            border-style: solid;
            border-color: #003359;
            padding: 2%;
        }

        .modal-dialog {
            width: 75%;
        }

        h3 {
            font-family: 'Century Gothic';
            color: #003359;
        }

        @media only screen and (max-width: 600px) {
            #buscador {
                display: -webkit-inline-box;
            }
        }
       


    </style>
</head>
<body ng-app="app">
    <div ng-show="auth" class="container">

        <div style="margin-top:10%;" ng-show="!completo" class="col-md-12 text-center">

            <h3>Atención! Ingrese sus datos personales antes de contratar un lavado!</h3>
            <a class="btn btn-lg btn-danger" href="/#!/lavador">Datos Personales</a>

        </div>

        <div ng-show="completo">

            <div class=" col-md-12 text-center jumbotron">
                <h2 style="font-family:'Century Gothic'; color:#003359;font-size:45px;" translate="BuscarLavados"></h2>
            </div>

            <div ng-show="!MostrarLavados" class="col-md-12 text-center ">
                <h3 style="font-family:'Century Gothic'; color:#003359;" translate="IngresaUbicacion"></h3>
                <br />
                <div>
                    <img ng-show="cargandoMapa" src="../../img/loading.gif" />
                    <div ng-hide="cargandoMapa" id="map">
                        <iframe id="iframe" width="250" height="350" frameborder="0" style="border:0" src="{{url}}" allowfullscreen></iframe>
                    </div>
                    <div class="form-group">
                        <div id="buscador" class="form-inline" style="width: 100%;">
                            <input id="direccion" ng-model="Direccion" class="form-control" style="width: 85%" value="{{Direccion}}" type="text" />
                            <button type="button" ng-click="ActualizarUbicacion(Direccion)" class="btn btn-info">
                                <span class="glyphicon glyphicon-search"></span>
                            </button>
                        </div>
                        <a ng-show="buscarlavados" ng-click="BuscarLavados(Direccion)" style="margin-top:2%;font-size: 20px;" class="btn btn-info">{{'BuscarLavados'|translate}}</a>

                        <div ng-show="ErrorDireccion" class="alert alert-danger">
                            <strong>Error!</strong> La dirección introducida es incorrecta. Intente nuevamente.
                        </div>

                    </div>

                </div>


            </div>


            <div class="col-md-12 text-center">
                <img ng-show="CargandoLavados" src="../../img/loading.gif" />
            </div>


            <div ng-show="MostrarLavados && !CargandoLavados && !Error" ng-app="angularTable" class="col-md-12 row text-center" style="margin-top:1%;">

                <div class="row col-md-12">

                    <!--<form style="    margin-bottom: 2%;    margin-top: 2%;    margin-left: 4%;" class="form-inline text-left">
                        <div class="form-group">
                            <label>Search</label>
                            <input type="text" ng-model="search" class="form-control" placeholder="Search">
                        </div>
                    </form>-->
                    <div class="table-responsive">

                        <table class="table">
                            <thead>

                                <tr>
                                    <th ng-click="sort('Auto')" class="text-center">{{'Auto'|translate}}</th>
                                    <th ng-click="sort('Servicio')" class="text-center">{{'Servicio'|translate}}</th>
                                    <th ng-click="sort('Distancia')" class="text-center">{{'Distancia'|translate}}</th>
                                    <!--<th ng-click="sort('Estado')" class="text-center">Estado</th>-->
                                    <th class="text-center"></th>
                                </tr>
                            </thead>
                            <tr dir-paginate="x in Lavados| orderBy:sortKey:reverse| filter:search |itemsPerPage:10">
                                <!--<td>{{x.Fecha | date : "dd/MM/y"}}</td>-->
                                <td>{{x.Auto}}</td>
                                <td>{{x.Servicio}}</td>
                                <td>{{x.Distancia}}</td>


                                <td class="text-center"><a class='btn btn-warning btn-xs' ng-click="GetDetalleLavado(x.IdLavado)" data-toggle="modal" data-target="#myModal" style="color:black;" href=""><span class="glyphicon glyphicon-edit"></span>{{'Detalle'|translate}}</a></td>
                            </tr>
                        </table>
                    </div>
                    <dir-pagination-controls max-size="5"
                                             direction-links="true"
                                             boundary-links="true">
                    </dir-pagination-controls>


                    <div class="modal fade" id="myModal" role="dialog">
                        <div class="modal-dialog">

                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <button type="button" id="close" class="close" data-dismiss="modal">&times;</button>
                                    <h2 style="font-family:'Century Gothic'; color:#003359;" class="modal-title"translate="DetalleLavado"></h2>
                                </div>
                                <div ng-show="CargandoDetalle">
                                    <img src="../../img/loading.gif" />
                                </div>
                                <div ng-show="!CargandoDetalle" class="modal-body">

                                    <div ng-show="!AsignacionOk && !AsignacionError">
                                        <div class="col-md-6">
                                            <h3><strong>{{'Cliente'|translate}}:</strong>&nbsp;{{Lavado.Clientes.Nombre}}&nbsp;{{Lavado.Clientes.Apellido}}</h3>
                                            <h3><strong>{{'Auto'|translate}}:</strong>&nbsp;{{Lavado.Marcas.Descripcion}}&nbsp;{{Lavado.Modelos.Descripcion}}</h3>
                                            <h3><strong>{{'Servicio'|translate}}:</strong>&nbsp;{{Lavado.Servicios.Nombre}}</h3>
                                            <h3><strong>{{'Precio'|translate}}:</strong>&nbsp;${{Lavado.Total}},00</h3>
                                            <h3><strong>{{'Direccion'|translate}}:</strong>&nbsp; {{Lavado.Direccion}}</h3>
                                        </div>
                                        <div class="col-md-6">
                                            <div ng-hide="cargandoMapa" id="map">
                                                <iframe id="iframe" width="250" height="350" frameborder="0" style="border:0" src="{{urlCliente}}" allowfullscreen></iframe>
                                            </div>
                                        </div>
                                        <a ng-click="AsignarLavado(Lavado.IdLavado,Direccion)" style="width:90%;font-size:26px;margin-top:5% ;font-family:'Century Gothic';" class="btn btn-info btn-lg">{{'RealizarLavado'|translate}}</a>
                                    </div>
                                    <div class="text-center" ng-show="AsignacionOk">
                                        <h2 translate="LavadoAsignado"></h2>
                                        <img src="../../img/tilde.png" />
                                        <h2 translate="Redirigiendo"></h2>
                                    </div>

                                </div>
                            </div>

                        </div>
                    </div>
                </div>
            </div>



            <div ng-show="Error" class="alert alert-danger col-md-12 text-center">
                <strong>Error!</strong> Error al Obtener Lavados
            </div>


        </div>


    </div>

</body>
</html>